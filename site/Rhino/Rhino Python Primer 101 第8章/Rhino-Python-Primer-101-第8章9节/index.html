
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A new project generated from the default template project.">
      
      
        <meta name="author" content="Alex">
      
      
      
        <link rel="prev" href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A08%E8%8A%82/">
      
      
        <link rel="next" href="../Rhino-Python-Primer-101-%E7%AC%AC9%E7%AB%A09%E8%8A%82/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.ico">
      <meta name="generator" content="zensical-0.0.15">
    
    
      
        <title>8.9 曲面 - Alex The Creator</title>
      
    
    
      
        
      
      <link rel="stylesheet" href="../../../assets/stylesheets/modern/main.f1b6466b.min.css">
      
        
          
        
        <link rel="stylesheet" href="../../../assets/stylesheets/modern/palette.dfe2e883.min.css">
      
      
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
  
  <style>:root{}</style>



  
  
    
      
      
      
    
  
    
      
      
        
      
      
    
  
    
      
      
        
      
      
    
  
    
      
      
        
      
      
    
  
  
  <style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%222%22%20class%3D%22lucide%20lucide-hash%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M4%209h16M4%2015h16M10%203%208%2021M16%203l-2%2018%22/%3E%3C/svg%3E');}.md-tag.md-tag--life{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20fill%3D%22currentColor%22%20d%3D%22M360%200c13.3%200%2024%2010.7%2024%2024v19c0%2040.3%2016%2079%2044.5%20107.5l21%2021C469%20191%20480%20217.4%20480%20245v19c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24v-19c0-14.9-5.9-29.1-16.4-39.6l-21-21C357.1%20146.9%20336%2096%20336%2043V24c0-13.3%2010.7-24%2024-24m192%20288c-13.3%200-24-10.7-24-24v-19c0-40.3-16-79-44.5-107.5l-21-21C443%2097%20432%2070.6%20432%2043V24c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v19c0%2014.9%205.9%2029.1%2016.4%2039.6l21%2021C554.9%20141.1%20576%20192%20576%20245v19c0%2013.3-10.7%2024-24%2024M320%20448h96v-32h-96zM0%20416c0-35.3%2028.7-64%2064-64h384c17.7%200%2032%2014.3%2032%2032v96c0%2017.7-14.3%2032-32%2032H64c-35.3%200-64-28.7-64-64zm576-40v112c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24V376c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024%22/%3E%3C/svg%3E');}.md-tag.md-tag--py{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20fill%3D%22currentColor%22%20d%3D%22M439.8%20200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0%2036.8-31.2%2067.8-66.8%2067.8H172.7c-29.2%200-53.4%2025-53.4%2054.3v101.8c0%2029%2025.2%2046%2053.4%2054.3%2033.8%209.9%2066.3%2011.7%20106.8%200%2026.9-7.8%2053.4-23.5%2053.4-54.3v-40.7H226.2v-13.6h160.2c31.1%200%2042.6-21.7%2053.4-54.2%2011.2-33.5%2010.7-65.7%200-108.6M286.2%20444.7a20.4%2020.4%200%201%201%200-40.7%2020.4%2020.4%200%201%201%200%2040.7M167.8%20248.1h106.8c29.7%200%2053.4-24.5%2053.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2%208-53.4%2024.7-53.4%2055.6v40.7h106.9v13.6h-147c-31.1%200-58.3%2018.7-66.8%2054.2-9.8%2040.7-10.2%2066.1%200%20108.6%207.6%2031.6%2025.7%2054.2%2056.8%2054.2H101v-48.8c0-35.3%2030.5-66.4%2066.8-66.4m-6.6-183.4a20.4%2020.4%200%201%201%200%2040.8%2020.4%2020.4%200%201%201%200-40.8%22/%3E%3C/svg%3E');}.md-tag.md-tag--rhino{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M6.823%203.103q-.15%200-.34.017c-.511.044-1.25.18-1.802.329a6.3%206.3%200%200%200-1.15.42c-.231.112-.33.178-.354.273-.023.094.028.217.16.436s.346.533.535.961.356.97.361%201.651c.006.68-.149%201.5-.245%201.962s-.133.568-.227.618-.245.044-.525-.021c-.281-.065-.69-.187-1.1-.259s-.819-.093-1.122-.038c-.304.056-.504.189-.645.369-.14.18-.224.406-.282.75A7%207%200%200%200%200%2011.687c.005.317.047.49.136.584.088.094.223.109.492.054s.672-.18%201.224-.215a6.3%206.3%200%200%201%201.94.202c.685.182%201.353.49%201.95.93.598.438%201.127%201.007%201.566%201.593.438.586.787%201.189%201.004%201.541.217.353.304.455.372.42s.117-.207.145-.417a3.1%203.1%200%200%200-.02-.848%207.5%207.5%200%200%200-.32-1.365%205.6%205.6%200%200%200-.495-1.018c-.146-.247-.241-.408-.245-.51s.085-.148.51-.315c.424-.167%201.185-.457%201.958-.808s1.556-.764%202.042-1.106c.486-.341.674-.61.724-.937.05-.326-.039-.71-.16-1.076a7%207%200%200%200-.529-1.193A14%2014%200%200%200%2011.28%205.6a9%209%200%200%200-1.1-1.236c-.282-.255-.421-.31-.51-.29s-.131.115-.168.47c-.037.356-.07.973-.144%201.559a7.5%207.5%200%200%201-.432%201.773%2012.5%2012.5%200%200%201-.99%201.982c-.388.64-.803%201.212-1.054%201.462-.25.25-.336.18-.477.064l-.486-.4c-.15-.125-.253-.213-.273-.293s.045-.15.27-.448c.227-.299.615-.825.96-1.478a7.8%207.8%200%200%200%20.796-2.282%2010%2010%200%200%200%20.095-2.338c-.044-.564-.124-.77-.306-.896-.137-.095-.332-.146-.638-.146m6.48%207.034h-.012c-.084.01-.192.112-.415.294a7%207%200%200%201-1.017.7c-.458.257-1.038.507-1.51.734-.47.226-.831.429-1.004.712-.172.283-.155.648.04.85.194.204.566.246.883.259s.58-.002.826.087c.246.09.475.285.764.516.288.23.637.498.925.561s.518-.079.766-.202c.249-.124.516-.23.888-.225.371.005.847.12%201.318.37.47.248.938.63%201.184.866.247.236.272.327.245.362-.028.036-.108.018-.304-.14-.196-.157-.508-.454-.917-.688s-.916-.404-1.4-.391c-.482.013-.94.21-1.23.55s-.412.822-.546%201.164c-.133.341-.28.543-.47.617s-.424.02-.703-.099c-.28-.12-.604-.307-.874-.442-.269-.136-.484-.22-.62-.353s-.195-.31-.203-.571c-.01-.26.032-.6.05-.853.02-.25.018-.413-.038-.56a1.1%201.1%200%200%200-.232-.35c-.07-.07-.099-.075-.113-.058s-.012.058.01.158c.023.1.067.26.05.581-.019.321-.098.803-.16%201.17s-.107.618-.02.808.306.322.707.54c.4.22.982.527%201.518.855.537.327%201.027.673%201.562%201.089.534.415%201.112.9%201.5%201.238.39.339.588.532.742.59.154.059.264-.018.307-.138.044-.12.023-.285-.014-.429a1.2%201.2%200%200%200-.24-.46%205%205%200%200%200-.68-.704c-.287-.243-.614-.463-.803-.614s-.242-.233-.212-.259.14.004.302.108c.162.103.375.28.612.459.237.178.499.356.733.584.235.228.443.506.583.706.14.201.214.324.294.372.08.049.165.022.277-.05a3%203%200%200%200%20.426-.355c.178-.169.398-.393.551-.633s.242-.496.299-.772.08-.572.247-.862.476-.574.994-1.025%201.244-1.07%201.891-1.664c.648-.595%201.216-1.165%201.696-1.802.479-.638.87-1.342%201.067-1.743.199-.4.205-.498.14-.526-.063-.027-.198.015-.61.313-.414.297-1.106.849-1.886%201.43-.781.58-1.65%201.19-2.336%201.569-.686.378-1.19.524-1.55.562-.361.037-.58-.034-.724-.11-.143-.077-.21-.158-.224-.241-.013-.084.03-.17.135-.275s.277-.232.447-.392.338-.354.468-.556.22-.411.261-.592.034-.333-.04-.376-.215.023-.376.11c-.162.086-.343.192-.593.3a2.7%202.7%200%200%201-.92.235%201.63%201.63%200%200%201-1.088-.313c-.343-.26-.635-.71-.866-1.147s-.398-.865-.512-1.12c-.108-.242-.168-.33-.246-.33zm-2.215%204.075a.42.42%200%200%200-.294.115c-.094.086-.145.2-.034.338.112.137.385.297.636.469.252.172.481.357.666.42.184.064.323.006.402-.096s.1-.247-.003-.404-.327-.325-.564-.481c-.238-.157-.488-.302-.681-.346a.6.6%200%200%200-.128-.015m.252.208q.038%200%20.083.01c.118.026.272.115.418.211s.283.2.333.289.014.163-.048.216a.26.26%200%200%201-.247.053c-.1-.031-.216-.126-.36-.219-.145-.093-.319-.184-.387-.268s-.031-.162.029-.218a.26.26%200%200%201%20.18-.074zm4.778%203.728c.211-.008.42.06.602.24.183.178.34.467.383.732s-.03.505-.125.692a1.6%201.6%200%200%201-.289.397c-.074.074-.109.095-.14.095h-.003c-.033-.001-.062-.023-.208-.171a7%207%200%200%201-.573-.642c-.165-.22-.232-.383-.263-.568-.032-.185-.027-.39.082-.536s.323-.23.534-.239m.093%201.111a.26.26%200%200%200-.153.046c-.058.041-.105.113-.093.185.012.073.085.146.174.255s.195.255.264.335c.068.08.1.093.127.091.029-.002.054-.018.086-.048a.35.35%200%200%200%20.094-.157.5.5%200%200%200%20.002-.316.67.67%200%200%200-.218-.282.48.48%200%200%200-.283-.109%22/%3E%3C/svg%3E');}}</style>

    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,500,500i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="/assets/styles/custom_stepslist.css">
    
      <link rel="stylesheet" href="/assets/styles/format.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0),__md_get=(e,t=localStorage,a=__md_scope)=>JSON.parse(t.getItem(a.pathname+"."+e)),__md_set=(e,t,a=localStorage,_=__md_scope)=>{try{a.setItem(_.pathname+"."+e,JSON.stringify(t))}catch(e){}},document.documentElement.setAttribute("data-platform",navigator.platform)</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-VQRYHY3Y8P"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-VQRYHY3Y8P",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-VQRYHY3Y8P",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#89" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2025 Zensical and contributors

  SPDX-License-Identifier: MIT
  Third-party contributions licensed under DCO

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine classes -->





<!-- Header -->
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="页眉">

        <!-- Link to home -->
        <a href="../../.." title="Alex The Creator"
            class="md-header__button md-logo" aria-label="Alex The Creator" data-md-component="logo">
            
  <img src="../../../assets/images/favicon.ico" alt="logo">

        </a>

        <!-- Button to open drawer -->
        <label class="md-header__button md-icon" for="__drawer">
            
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-menu" viewBox="0 0 24 24"><path d="M4 5h16M4 12h16M4 19h16"/></svg>
        </label>

        <!-- Header title -->
        <div class="md-header__title" data-md-component="header-title">
            <div class="md-header__ellipsis">
                <div class="md-header__topic">
                    <span class="md-ellipsis">
                        Alex The Creator
                    </span>
                </div>
                <div class="md-header__topic" data-md-component="header-topic">
                    <span class="md-ellipsis">
                        
                        8.9 曲面
                        
                    </span>
                </div>
            </div>
        </div>

        <!-- Navigation tabs (sticky) -->
        
        
        
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  Alex The Creator

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  Rhino

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Python/" class="md-tabs__link">
          
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../About/about/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
        
        


        <!-- Color palette toggle -->
        
        
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="none" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="none" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-moon" viewBox="0 0 24 24"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></svg>
      </label>
    
  
</form>
        
        

        <!-- User preference: color palette -->
        
        <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
        

        <!-- Site language selector -->
        

        <!-- Button to open search modal -->
        
        

        <!-- Check if search is actually enabled - see https://t.ly/DT_0V -->
        
        <label class="md-header__button md-icon" for="__search">
            
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-search" viewBox="0 0 24 24"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
        </label>

        <!-- Search interface -->
        <div class="md-search" data-md-component="search" role="dialog" aria-label="查找">
  <button type="button" class="md-search__button">
    查找
  </button>
</div>
        
        

        <!-- Repository information -->
        <div class="md-header__source">
            <!--  -->
            <a href="https://github.com/chinabiue/al666ex" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.291.068A1.29 1.29 0 0 0 0 1.36v3.352a1.29 1.29 0 0 0 1.291 1.291h3.354a1.29 1.29 0 0 0 1.289-1.291V1.359A1.29 1.29 0 0 0 4.644.07Zm9.033 0a1.29 1.29 0 0 0-1.29 1.291v3.352a1.29 1.29 0 0 0 1.29 1.291H22.71A1.29 1.29 0 0 0 24 4.711V1.359A1.29 1.29 0 0 0 22.709.07ZM1.291 9.033A1.29 1.29 0 0 0 0 10.323v3.353a1.29 1.29 0 0 0 1.291 1.29h21.418A1.29 1.29 0 0 0 24 13.677v-3.354a1.29 1.29 0 0 0-1.291-1.289Zm0 8.965A1.29 1.29 0 0 0 0 19.289v3.352a1.29 1.29 0 0 0 1.291 1.29h12.385a1.29 1.29 0 0 0 1.29-1.29v-3.352a1.29 1.29 0 0 0-1.29-1.291zm18.064 0a1.29 1.29 0 0 0-1.289 1.291v3.352a1.29 1.29 0 0 0 1.29 1.29h3.353A1.29 1.29 0 0 0 24 22.642V19.29a1.29 1.29 0 0 0-1.291-1.291z"/></svg>
  </div>
  <div class="md-source__repository">
    CLAT
  </div>
</a>
            <!--  -->
        </div>
    </nav>

    <!-- Navigation tabs (sticky) -->
    <!-- 
    
    
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  Alex The Creator

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  Rhino

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Python/" class="md-tabs__link">
          
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../About/about/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
     -->
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Alex The Creator" class="md-nav__button md-logo" aria-label="Alex The Creator" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.ico" alt="logo">

    </a>
    Alex The Creator
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/chinabiue/al666ex" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.291.068A1.29 1.29 0 0 0 0 1.36v3.352a1.29 1.29 0 0 0 1.291 1.291h3.354a1.29 1.29 0 0 0 1.289-1.291V1.359A1.29 1.29 0 0 0 4.644.07Zm9.033 0a1.29 1.29 0 0 0-1.29 1.291v3.352a1.29 1.29 0 0 0 1.29 1.291H22.71A1.29 1.29 0 0 0 24 4.711V1.359A1.29 1.29 0 0 0 22.709.07ZM1.291 9.033A1.29 1.29 0 0 0 0 10.323v3.353a1.29 1.29 0 0 0 1.291 1.29h21.418A1.29 1.29 0 0 0 24 13.677v-3.354a1.29 1.29 0 0 0-1.291-1.289Zm0 8.965A1.29 1.29 0 0 0 0 19.289v3.352a1.29 1.29 0 0 0 1.291 1.29h12.385a1.29 1.29 0 0 0 1.29-1.29v-3.352a1.29 1.29 0 0 0-1.29-1.291zm18.064 0a1.29 1.29 0 0 0-1.289 1.291v3.352a1.29 1.29 0 0 0 1.29 1.29h3.353A1.29 1.29 0 0 0 24 22.642V19.29a1.29 1.29 0 0 0-1.291-1.291z"/></svg>
  </div>
  <div class="md-source__repository">
    CLAT
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Alex The Creator
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Rhino
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rhino
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%9B%B2%E7%BA%BF%E5%8F%82%E6%95%B0%E7%A9%BA%E9%97%B4/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-tangent" viewBox="0 0 24 24"><circle cx="17" cy="4" r="2"/><path d="M15.59 5.41 5.41 15.59"/><circle cx="4" cy="17" r="2"/><path d="M12 22s-4-9-1.5-11.5S22 12 22 12"/></svg>
  
  <span class="md-ellipsis">
    
  
    曲线参数空间
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Rhino%E7%BB%8F%E5%85%B8%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1C8.14 1 5 4.14 5 8a7 7 0 0 0 7 7c3.86 0 7-3.13 7-7 0-3.86-3.14-7-7-7m0 2.15c2.67 0 4.85 2.17 4.85 4.85s-2.18 4.85-4.85 4.85A4.85 4.85 0 0 1 7.15 8 4.85 4.85 0 0 1 12 3.15M11 5v3.69l3.19 1.84.75-1.3-2.44-1.41V5M4 16v8h2v-3h12v3l4-4-4-4v3H6v-3"/></svg>
  
  <span class="md-ellipsis">
    
  
    Rhino经典理论知识整理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Grasshooper%E5%85%A5%E9%97%A8%E4%B8%8E%E6%8F%90%E9%AB%98/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20H2v-2h5.75C7 15.19 4.81 13 2 12.26c.64-.16 1.31-.26 2-.26 4.42 0 8 3.58 8 8m10-7.74c-.64-.16-1.31-.26-2-.26-2.93 0-5.5 1.58-6.88 3.93.29.66.53 1.35.67 2.07.13.65.21 1.32.21 2h8v-2h-5.76c.76-2.81 2.95-5 5.76-5.74M15.64 11c.78-2.07 2.23-3.82 4.09-5-4.29.16-7.73 3.67-7.73 8 .95-1.25 2.2-2.28 3.64-3m-4.22-2.15A8.53 8.53 0 0 0 6.7 4C8.14 5.86 9 8.18 9 10.71c0 .21-.03.41-.04.61.43.24.83.52 1.22.82a9.9 9.9 0 0 1 1.24-3.29"/></svg>
  
  <span class="md-ellipsis">
    
  
    Grasshooper入门与提高
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ATLV-Grasshopper-Python-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20H2v-2h5.75C7 15.19 4.81 13 2 12.26c.64-.16 1.31-.26 2-.26 4.42 0 8 3.58 8 8m10-7.74c-.64-.16-1.31-.26-2-.26-2.93 0-5.5 1.58-6.88 3.93.29.66.53 1.35.67 2.07.13.65.21 1.32.21 2h8v-2h-5.76c.76-2.81 2.95-5 5.76-5.74M15.64 11c.78-2.07 2.23-3.82 4.09-5-4.29.16-7.73 3.67-7.73 8 .95-1.25 2.2-2.28 3.64-3m-4.22-2.15A8.53 8.53 0 0 0 6.7 4C8.14 5.86 9 8.18 9 10.71c0 .21-.03.41-.04.61.43.24.83.52 1.22.82a9.9 9.9 0 0 1 1.24-3.29"/></svg>
  
  <span class="md-ellipsis">
    
  
    ATLV Grasshopper Python 学习笔记
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" checked>
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Rhino Python Primer 101 第8章
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rhino Python Primer 101 第8章
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A01%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8m0 5a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.1 openNURB(tm)内核
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A02%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.6 13v-.1l-.3-.3h-.1L9.6 12c.4-.3.8-.5 1.3-.5s1 .2 1.4.6.6.8.6 1.3-.1.9-.5 1.3zm-1.9 6.3c-.3-1-.1-2.2.7-3.8l1.2 3.1c.2.6 0 1-.6 1.3s-1 .1-1.3-.6m-5.6-6.2q.3-.9 1.2-.6l3.2 1.2c-1.6.8-2.8 1-3.8.7-.6-.3-.8-.7-.6-1.3m7.9-5h-1v1.4h-.4c-1.1 0-2 .4-2.8 1.2l-.4.6-1.4-.8c-.3-.1-.6-.1-1-.1-.6 0-1.2.2-1.7.6s-.9.8-1.1 1.4c-.2.7-.2 1.3 0 2 .3.7.6 1.2 1.1 1.5-.4 1.5-.1 2.8 1 3.9.8.8 1.7 1.2 2.8 1.2.5 0 .8 0 1.1-.1.6.8 1.4 1.3 2.4 1.3.3 0 .7 0 1-.1.6-.2 1-.6 1.4-1.1.4-.6.6-1.1.6-1.7 0-.4 0-.7-.1-1l-.6-1.4.6-.4c.8-.8 1.2-1.9 1.1-3.1H16v-1h-1.6q-.6-1.8-2.4-2.4zm5.3-1.3c-.2-.2-.3-.5-.3-.7 0-.3.1-.5.3-.7s.4-.3.7-.3.5.1.7.3c.2.1.3.4.3.7s-.1.5-.3.7-.4.2-.7.2-.5 0-.7-.2m3.4-2.7h-1.1l-.3-.9c-.2-.7-.6-1-1.3-1s-1.2.3-1.3 1l-.3.9h-1.1c-.6 0-1 .3-1.3.9q-.3.9.6 1.5l.9.5-.4 1.2c-.2.4-.1.8.1 1.2.3.4.6.6 1.1.6q.6 0 .9-.3l.8-.6.8.7c.2.1.5.2.9.2.5 0 .8-.2 1.1-.6.2-.4.3-.8.1-1.2L20.5 7l.8-.5q.9-.6.6-1.5c-.2-.7-.6-.9-1.2-.9"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.2 Rhino里的物体
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A03%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 9v6h6V9zm2 2h2v2h-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.3 点和点云
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A04%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3 14 .5.07L8.07 9.5a1.95 1.95 0 0 1 .52-1.91c.78-.79 2.04-.79 2.82 0 .53.52.7 1.26.52 1.91l2.57 2.57.5-.07c.18 0 .35 0 .5.07l3.57-3.57C19 8.35 19 8.18 19 8a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2c-.18 0-.35 0-.5-.07l-3.57 3.57c.07.15.07.32.07.5a2 2 0 0 1-2 2 2 2 0 0 1-2-2l.07-.5-2.57-2.57c-.32.07-.68.07-1 0L4.93 15.5 5 16a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.4 线段与多重直线
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A05%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v16a2 2 0 0 0 2 2h16c1.11 0 2-.89 2-2V4a2 2 0 0 0-2-2M4 6l2-2h4.9L4 10.9zm0 7.7L13.7 4h4.9L4 18.6zM20 18l-2 2h-4.9l6.9-6.9zm0-7.7L10.3 20H5.4L20 5.4z"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.5 平面
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A06%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 4a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8m0 14a6 6 0 0 0 6-6 6 6 0 0 0-6-6 6 6 0 0 0-6 6 6 6 0 0 0 6 6M3 12a5.99 5.99 0 0 0 4 5.65v2.09c-3.45-.89-6-4.01-6-7.74s2.55-6.85 6-7.74v2.09C4.67 7.17 3 9.39 3 12"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.6 圆、椭圆和弧线
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A07%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.5 2A1.5 1.5 0 0 1 20 3.5 1.5 1.5 0 0 1 18.5 5c-.23 0-.45-.05-.65-.15l-3.69 3.7.34.45c2.19-1.26 4.76-2 7.5-2l1 .03v2.01L22 9c-2.58 0-5 .75-7 2.04A3.96 3.96 0 0 1 11.04 15C9.75 17 9 19.42 9 22l.04 1H7.03L7 22c0-2.74.74-5.31 2-7.5l-.45-.34-3.7 3.69c.1.2.15.42.15.65A1.5 1.5 0 0 1 3.5 20 1.5 1.5 0 0 1 2 18.5 1.5 1.5 0 0 1 3.5 17c.23 0 .45.05.65.15l3.69-3.7C7.31 12.78 7 11.92 7 11a4 4 0 0 1 4-4c.92 0 1.78.31 2.45.84l3.7-3.69c-.1-.2-.15-.42-.15-.65A1.5 1.5 0 0 1 18.5 2M11 9a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.7 Nurbs曲线
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A08%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.62 13.28 1.64 2.26c.03-.54.12-1.07.3-1.61.18-.56.44-1.07.74-1.52zM17.77 19c-.02-1.32.18-2.73.64-4.15.47-1.43 1.15-2.71 1.95-3.76l-2.04.66c-.78.51-1.45 1.39-1.82 2.48-.33 1.06-.32 2.13 0 2.99zm1.48 2q-.75.69-1.62 1.2l-.32-.44C15.9 21 14.04 20.5 12 20.5s-3.9.5-5.31 1.26l-.32.44q-.87-.51-1.62-1.2l.25-.31c.33-1.61.22-3.57-.42-5.55-.64-1.95-1.68-3.58-2.87-4.68l-.44-.14c.15-.66.36-1.32.62-1.91l.4.13c1.63-.17 3.45-.89 5.14-2.11 1.66-1.21 2.89-2.7 3.57-4.17v-.47l1-.04 1 .04v.42c.67 1.5 1.91 3.02 3.6 4.24 1.66 1.21 3.46 1.92 5.07 2.11l.44-.15c.26.59.47 1.25.62 1.91l-.5.18c-1.19 1.08-2.23 2.71-2.86 4.66-.63 1.93-.75 3.84-.45 5.41zM11 11.37V8.5c-.34.42-.74.82-1.22 1.17-.49.33-1.01.62-1.53.83zm0-7.15c-.75 1.09-1.76 2.13-3 3.02-1.22.9-2.54 1.54-3.82 1.92l1.97.64c.96.08 2.07-.24 3.04-.94.94-.68 1.57-1.59 1.81-2.5zm2 7.15 2.74-.87c-.51-.2-1.02-.47-1.49-.81-.49-.36-.91-.77-1.25-1.19zm6.8-2.21c-1.27-.38-2.57-1.01-3.8-1.9-1.23-.9-2.24-1.95-3-3.06v2.07c.22.94.86 1.9 1.84 2.61.93.68 1.99.99 2.93.94zm-9.42 4.12-2.74-.89c.31.45.56.96.74 1.52.19.59.28 1.15.3 1.71zm-6.8-2.21c.8 1.05 1.48 2.33 1.95 3.76.47 1.46.67 2.91.64 4.25l1.21-1.67c.38-.91.42-2.05.05-3.19-.36-1.1-1.03-1.98-1.82-2.49zM12 14.45l-1.65 2.27a6.3 6.3 0 0 1 3.3 0zm-4.16 5.73c1.24-.43 2.66-.68 4.16-.68s2.92.25 4.16.68l-1.28-1.76c-.72-.57-1.75-.92-2.88-.92s-2.16.35-2.88.92z"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.8 网格
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m0 12c-4.42 0-8-.89-8-2 0-1.1 3.58-2 8-2s8 .9 8 2c0 1.11-3.58 2-8 2m0-10c3.37 0 6.25 2.09 7.43 5.05C17.93 8.43 15.61 8 12 8c-2.2 0-5.27.19-7.43 1.05C5.75 6.09 8.63 4 12 4m0 16c-3.37 0-6.25-2.09-7.43-5.05C6.07 15.57 8.39 16 12 16c2.2 0 5.27-.19 7.43-1.05C18.25 17.91 15.37 20 12 20"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.9 曲面
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m0 12c-4.42 0-8-.89-8-2 0-1.1 3.58-2 8-2s8 .9 8 2c0 1.11-3.58 2-8 2m0-10c3.37 0 6.25 2.09 7.43 5.05C17.93 8.43 15.61 8 12 8c-2.2 0-5.27.19-7.43 1.05C5.75 6.09 8.63 4 12 4m0 16c-3.37 0-6.25-2.09-7.43-5.05C6.07 15.57 8.39 16 12 16c2.2 0 5.27-.19 7.43-1.05C18.25 17.91 15.37 20 12 20"/></svg>
  
  <span class="md-ellipsis">
    
  
    8.9 曲面
  

    
  </span>
  
  

      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#891-nurbs" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.9.1 NURBS曲面
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#892" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.9.2 曲面的曲率
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#893" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.9.3 向量和张量空间
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        下一步
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rhino-Python-Primer-101-%E7%AC%AC9%E7%AB%A09%E8%8A%82/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5c.74 0 1.47.1 2.15.29l1.63-2.83c.28-.46.89-.64 1.37-.36.48.27.64.9.35 1.36L16 6.07A8.07 8.07 0 0 1 18.93 9H5.07A8.07 8.07 0 0 1 8 6.07L6.5 3.46a.98.98 0 0 1 .35-1.36c.48-.28 1.09-.1 1.37.36l1.63 2.83C10.53 5.1 11.26 5 12 5m8 8a8 8 0 0 1-7.25 7.97V10.5h6.85c.26.79.4 1.63.4 2.5M4 13c0-.87.14-1.71.4-2.5h6.85v10.47A8 8 0 0 1 4 13"/></svg>
  
  <span class="md-ellipsis">
    
  
    Rev3程序勘误
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Python/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/calculus-with-python/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-calculator" viewBox="0 0 24 24"><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M8 6h8M16 14v4M16 10h.01M12 10h.01M8 10h.01M12 14h.01M8 14h.01M12 18h.01M8 18h.01"/></svg>
  
  <span class="md-ellipsis">
    
  
    用Python来微积分
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/anaconda%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17H18c1.1 0 2-.9 2-2s-.9-2-2-2V9c0-1 0-2-1.08-2.86.05-.21.08-.42.08-.64C17 3.57 15 2 12.5 2c-2.26 0-4.12 1.31-4.43 3H6L3.71 2.79 3 3.5l2 2-2 2 .71.71L6 6h2.07c.31 1.69 2.17 3 4.43 3 .5 0 1-.08 1.43-.2.04.07.07.14.07.2v4H8c-1.1 0-2 .9-2 2s.9 2 2 2H6.5A2.5 2.5 0 0 0 4 19.5c0 .17 0 .34.05.5H4c-1.1 0-2 .9-2 2h17.5a2.5 2.5 0 0 0 0-5M12 5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>
  
  <span class="md-ellipsis">
    
  
    anaconda简单配置使用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/notepad-%E9%85%8D%E7%BD%AEpython%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83-%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E6%A0%BC%E5%BC%8F%E5%8C%96-%E8%BF%90%E8%A1%8C-%E9%AB%98%E4%BA%AE/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.443 2.285c-.305.005-.6.06-.853.248-.256.168-.546.32-.723.578a6.3 6.3 0 0 0-.71 2.463c-1.009-.413-2.08-.716-3.177-.676a8.6 8.6 0 0 0-1.93.604c-1.26.657-2.058 1.943-2.53 3.246a6.8 6.8 0 0 0-.604 1.805c-.107.568-.322 1.115-.357 1.695-.002.394.029.788.023 1.182-.422.263-.926.245-1.398.328-.34-.008-.67-.18-1.014-.07-.36.172-.75.269-1.111.437-.087.51-.166 1.225.457 1.424 1.064-.002 2.132.002 3.195.021.192.98.38 1.99.898 2.86.613.987 1.213 2.025 2.147 2.75.888.593 2.02.617 3.039.441.387-.043.656-.35 1.004-.492.212-.126.527-.156.607-.428.698-1.13.163-2.531-.47-3.56-.403-.707-1.275-.853-2.018-.82-.436.065-.712.44-1.063.667-.388.235-.761.735-.468 1.186.251.473.561 1.107 1.193 1.074.399-.046.932-.136 1.106-.553.077-.505-.519-.748-.92-.838.019.247.045.494.07.743q-.31-.213-.625-.418c.128-.667.87-.65 1.38-.854.52.81 1.068 1.852.645 2.815-.489.612-1.37.535-2.054.375-.894-.137-1.487-.933-1.881-1.682-.594-1.035-1.323-2.145-1.196-3.387q.626-.032 1.25.004c.398.094.752.438 1.182.27.922-.252 1.881-.1 2.822-.11a20 20 0 0 1 2.225-.031c.268.073.411.4.72.38.358.12.558-.246.827-.4a18 18 0 0 1 1.79.002c.283.494.706 1.022 1.31 1.092.734.027 1.356-.493 1.753-1.064.52.117 1.082.282 1.586.021 1.095-.464 2.3-.464 3.43-.785v-.322c-.907-.61-2.027-.441-3.043-.695-.775-.133-1.562-.012-2.34-.022-.345-.236-.683-.509-1.119-.537q-.202.087-.404.168c.356.04.728.12.994.38-.336-.02-.684-.004-1.002-.126-.428.157-.835.4-.902.894-.182-.255.083-.493.189-.72-.24-.507-.826-.768-.994-1.315a.29.29 0 0 1 .48-.008q.352.519.573 1.104.325.019.654.045v-.25q-.163.066-.322.142a10 10 0 0 1-.485-1.271c.258.062.506.155.766.207 1.176-.184 2.439-.412 3.36-1.232.194-.2.542-.37.484-.698-.057-.474-.402-.841-.573-1.277.267-.101.535-.2.793-.32.918-.899 1.377-2.185 1.477-3.448-.092-.673-.282-1.413-.803-1.886-.95-.48-2.07-.324-3.035.025-.437.174-.76.527-1.123.813-.296-.066-.477-.41-.672-.633-.375-.64-.89-1.235-1.596-1.51-.293-.011-.608-.055-.914-.05zm.395.516c.59.02 1.109.506 1.443.972.222.37.524.682.885.916a5.22 5.22 0 0 1-.277 3.791c-.167.375-.519.605-.864.795-.91.267-1.874-.133-2.521-.783l.012-.094c-.458-.214-.537-.767-.616-1.21-.39-.893-.293-1.916-.006-2.823.212-.71.756-1.39 1.526-1.498a1.1 1.1 0 0 1 .418-.066m5.592 1.025c.616.002 1.29.28 1.44.926.48 1.112-.052 2.344-.688 3.273-.368.345-.792.627-1.137 1-.425-.844-1.359-1.219-2.223-1.437.16-.808.04-1.628.022-2.44.468-.835 1.44-1.154 2.326-1.304q.127-.017.26-.018m.775 1.62a8 8 0 0 1-.523.138q-.187.272-.381.545c.141.372.636.718.984.38a1.3 1.3 0 0 0-.08-1.064c-.178-.318 0 0 0 0zm-11.988.046c.9-.011 1.793.272 2.601.653.38.153.353.6.438.933.065.26.14.516.217.774.126.383.292.78.62 1.037.546.418 1.108.867 1.794 1.025a2.42 2.42 0 0 0 1.787-.303c.45-.404.668-1.007 1.137-1.396.44.215.927.318 1.351.568.44.278.653.777.912 1.207.09.194.164.392.242.588-.786.782-1.936.988-2.974 1.23-.43.128-.829-.096-1.186-.304-.184.101-.367.209-.552.309a3.7 3.7 0 0 1-2.145.45 33 33 0 0 1-.55-.072c.084-.376.182-.749.259-1.127-.092.008-.277.02-.37.026-.31.476-.325 1.052-.263 1.597q.023.31.037.62a1.57 1.57 0 0 1-.408-.932c.016-.391.065-.778.1-1.168-.41-.177-.571.292-.647.596 0 .168.012.335.024.502-.714.163-1.48.246-2.188.011-.514-.168-1.075-.182-1.557-.445q-.023-.3-.054-.596-.212-.038-.422-.08c-.189.507-.452 1.021-.424 1.575.095.365.401.634.629.925-.335.098-.791.022-1.016.334-.135.601.413.948.772 1.319-.516-.19-1.089-.463-1.266-1.03q.39-.455.881-.797c-.471-.698-.676-1.743-.066-2.421-.118-.143-.257-.39-.477-.268-.172.162-.318.35-.484.52-.7.533-.976 1.386-1.399 2.12q-.308-.012-.615-.013l-.01-.254a4.6 4.6 0 0 1-.023-1.014c.153-.596.418-1.158.568-1.755l.051-.194.086-.293c.452-1.231 1.008-2.494 2.012-3.379.642-.636 1.563-.81 2.396-1.07q.091-.005.182-.008m5.12.496c-.38-.012-.738.145-.675.596-.055.394.323.572.592.76.602-.003.872-.686.707-1.178a1.26 1.26 0 0 0-.623-.178zm-8.064 5.79a1.87 1.87 0 0 0 .225 1.622c-.391.203-.826.213-1.256.211-.09-.648.318-1.202.621-1.736q.207-.045.41-.098zm1.213.544c.353.101.773.09 1.051.358a8 8 0 0 0-.113.525 5 5 0 0 0-.654.465 1.75 1.75 0 0 1-.284-1.348m7.168.324c.211.023.262.279.4.407.236.306.573.512.852.775-.67.018-1.475.102-1.88-.562-.271.074-.543.183-.684.445l-.4-.217q-.007-.376.025-.752h.457q.62.005 1.23-.096m-5.306.147c.02.336.18.73-.07 1.02-.246-.021-.492-.041-.733-.084.326-.195.567-.505.674-.87zm2.51.117c.315.24.445.634.591.986q-1.408.054-2.814-.039c.064-.31.17-.61.252-.916.655-.02 1.313 0 1.97-.03zm.826.535q.228.276.498.512c.24-.277.775-.727.998-.193-.363.174-.813.305-.934.742l-.012.053q.114.572.307 1.123c-.773-.505-.391-1.548-.857-2.237m-10.815.293c-.02.295-.422.42-.373.727q.137.436.354.838c-.491-.023-.989.003-1.475-.088-.046-.256-.161-.635.11-.805.259-.16.47-.389.615-.658.255.04.516.036.77-.014zm.66.153c-.208.362-.461.81-.138 1.191l-.176.078a2.7 2.7 0 0 1-.361-.676 7 7 0 0 0 .28-.566 9 9 0 0 0 .395-.027m.518.086.033.08.11-.047c-.04.227-.205.391-.346.562.233.014.296.764-.041.557l-.127-.225c.024-.227-.012-.48.181-.648l.055-.067.086-.095zm3.943.074c.347.082.895-.121 1.11.166.31.05.603.197.92.205 1.122-.329 2.316-.154 3.47-.154.006.1.02.298.028.398q-1.303.048-2.604.014c-.452-.003-.881-.307-1.338-.17-.2.018-.424.229-.6.043-.28-.003-.562-.012-.843-.018-.045-.17-.1-.34-.143-.484m-2.428.017c.375.05.849-.096 1.131.225l-.12.27c-.74-.036-1.48-.043-2.221-.065.151-.495.8-.404 1.21-.43m15.87.016c.502-.022.98.166 1.478.215.003.207.065.428-.035.623-.608.116-1.185.383-1.81.398q.017-.252.023-.506l.287-.187zm-1.61.014q.153 0 .307.01c.229.044.396.227.588.347-.552.275-1.181.207-1.772.127-.456-.062-.93.022-1.377-.115l.125-.225c.708-.06 1.416-.151 2.13-.144zm-3.761.097q.325.004.652.006.033.33-.28.319c-.517.014-1.034.012-1.55-.018-.05-.306.34-.249.525-.295.217-.013.435-.014.653-.012m-.516.647c.542 0 1.083.051 1.615.152.744-.097 1.494-.005 2.235-.135.306.024.95-.115.876.371-.349.042-.674-.177-1.027-.14-.694.043-1.393.107-2.08-.045-.787.165-1.591.088-2.387.137l-.021-.305c.268-.03.546-.024.789-.035m-10.418.012c.6 0 1.203.111 1.803.132l.125.143c-.808-.002-1.622.062-2.426-.022l-.104-.209q.301-.046.602-.044m3.426.119c.34.003.683.008 1.025.002 1.337.016 2.672.035 4.006.125l-.098.168c-1.304.043-2.606.02-3.91.015l-.822-.029q-.1-.143-.201-.281m8.642.39c.43.192.857.393 1.305.543.259-.104.615-.671.826-.26-.328.305-.791.614-1.26.51-.36-.17-.59-.52-.87-.793zm-11.984.07.33.05c.363.841.38 1.81.873 2.599.284.467.518.96.793 1.432.287.492.762.824 1.207 1.162.955.702 2.52.596 3.197-.438.427-.922-.104-1.898-.474-2.74-.634-.996-2.29-.238-2.242.848.364.218.767.663 1.222.384a11 11 0 0 1-.013-.533c.108.12.19.261.296.383-.255.329-.67.314-1.045.262-.151-.168-.307-.331-.46-.496-.188-1.083 1.193-1.994 2.11-1.446.655.42.838 1.228 1.099 1.91.301.821-.144 1.793-.924 2.159-.601.388-1.346.234-2.018.234-.917-.044-1.515-.793-2.117-1.387-.58-.712-.958-1.557-1.41-2.351a7.7 7.7 0 0 1-.424-2.031z"/></svg>
  
  <span class="md-ellipsis">
    
  
    notepad++配置python运行环境
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/python%E6%89%B9%E9%87%8F%E8%BD%AC%E6%8D%A2svg%E5%9B%BE%E7%89%87%E4%B8%BApng_cairosvg%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0c-1.497 0-2.749.965-3.248 2.17a3.45 3.45 0 0 0-.238 1.416 3.5 3.5 0 0 0-1.168-.834 3.5 3.5 0 0 0-1.463-.256 3.5 3.5 0 0 0-2.367 1.02c-1.06 1.058-1.263 2.625-.764 3.83.179.432.47.82.82 1.154a3.5 3.5 0 0 0-1.402.252C.965 9.251 0 10.502 0 12c0 1.497.965 2.749 2.17 3.248.437.181.924.25 1.414.236-.357.338-.65.732-.832 1.17-.499 1.205-.295 2.772.764 3.83 1.058 1.06 2.625 1.263 3.83.764.437-.181.83-.476 1.168-.832-.014.49.057.977.238 1.414C9.251 23.035 10.502 24 12 24c1.497 0 2.749-.965 3.248-2.17a3.45 3.45 0 0 0 .238-1.416c.338.356.73.653 1.168.834 1.205.499 2.772.295 3.83-.764 1.06-1.058 1.263-2.625.764-3.83a3.5 3.5 0 0 0-.834-1.168 3.45 3.45 0 0 0 1.416-.238C23.035 14.749 24 13.498 24 12c0-1.497-.965-2.749-2.17-3.248a3.5 3.5 0 0 0-1.414-.236c.357-.338.65-.732.832-1.17.499-1.205.295-2.772-.764-3.83a3.5 3.5 0 0 0-2.367-1.02 3.5 3.5 0 0 0-1.463.256c-.437.181-.83.475-1.168.832a3.45 3.45 0 0 0-.238-1.414C14.749.965 13.498 0 12 0m-.041 1.613a1.902 1.902 0 0 1 1.387 3.246v3.893L16.098 6A1.902 1.902 0 1 1 18 7.902l-2.752 2.752h3.893a1.902 1.902 0 1 1 0 2.692h-3.893L18 16.098A1.902 1.902 0 1 1 16.098 18l-2.752-2.752v3.893a1.902 1.902 0 1 1-2.692 0v-3.893L7.902 18A1.902 1.902 0 1 1 6 16.098l2.752-2.752H4.859a1.902 1.902 0 1 1 0-2.692h3.893L6 7.902A1.902 1.902 0 1 1 7.902 6l2.752 2.752V4.859a1.902 1.902 0 0 1 1.305-3.246"/></svg>
  
  <span class="md-ellipsis">
    
  
    批量转换svg->png(cairosvg)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/Python-f-string-snippets-%E5%AE%9E%E7%94%A8%E7%94%A8%E5%B0%8F%E7%89%87%E6%AE%B5/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M32 32C14.3 32 0 46.3 0 64v384c0 17.7 14.3 32 32 32s32-14.3 32-32V288h160c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V96h224c17.7 0 32-14.3 32-32s-14.3-32-32-32z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Python f-string 小片段
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/Samila%E9%A1%B9%E7%9B%AE%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.23 16.615h5.54c.51 0 .922.412.922.923v5.539a.92.92 0 0 1-.923.923H9.231a.92.92 0 0 1-.923-.923v-5.539a.92.92 0 0 1 .923-.923zM0 17.538c0-.51.413-.923.923-.923h5.539c.51 0 .923.413.923.923v5.539c0 .51-.414.923-.923.923H2.769A2.77 2.77 0 0 1 0 21.23zm.923-9.23h5.539a.92.92 0 0 1 .923.922v5.539a.92.92 0 0 1-.923.923H.923A.92.92 0 0 1 0 14.769V9.23c0-.511.412-.923.923-.923zM2.77 0A2.77 2.77 0 0 0 0 2.769V6.46c0 .51.413.923.923.923h5.539c1.02 0 1.846.827 1.846 1.846v5.539c0 .51.413.923.923.923h5.538c1.02 0 1.847.826 1.847 1.846v5.539c0 .51.413.923.923.923h3.692A2.77 2.77 0 0 0 24 21.23V2.77A2.77 2.77 0 0 0 21.23 0zm18 1.846a1.385 1.385 0 1 1 0 2.769 1.385 1.385 0 0 1 0-2.77z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Samila项目说明
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/%E7%94%9F%E6%88%90%E8%89%BA%E6%9C%AFGenerative-art-with-samila/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.23 16.615h5.54c.51 0 .922.412.922.923v5.539a.92.92 0 0 1-.923.923H9.231a.92.92 0 0 1-.923-.923v-5.539a.92.92 0 0 1 .923-.923zM0 17.538c0-.51.413-.923.923-.923h5.539c.51 0 .923.413.923.923v5.539c0 .51-.414.923-.923.923H2.769A2.77 2.77 0 0 1 0 21.23zm.923-9.23h5.539a.92.92 0 0 1 .923.922v5.539a.92.92 0 0 1-.923.923H.923A.92.92 0 0 1 0 14.769V9.23c0-.511.412-.923.923-.923zM2.77 0A2.77 2.77 0 0 0 0 2.769V6.46c0 .51.413.923.923.923h5.539c1.02 0 1.846.827 1.846 1.846v5.539c0 .51.413.923.923.923h5.538c1.02 0 1.847.826 1.847 1.846v5.539c0 .51.413.923.923.923h3.692A2.77 2.77 0 0 0 24 21.23V2.77A2.77 2.77 0 0 0 21.23 0zm18 1.846a1.385 1.385 0 1 1 0 2.769 1.385 1.385 0 0 1 0-2.77z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Samila生成艺术
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/%E4%BD%BF%E7%94%A8pathlib%E6%9B%BF%E6%8D%A2os-os-path-glob/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-route" viewBox="0 0 24 24"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>
  
  <span class="md-ellipsis">
    
  
    使用pathlib替换os.path
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8-python%E5%89%8D%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E4%B8%AD%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-layers" viewBox="0 0 24 24"><path d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"/><path d="M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"/><path d="M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"/></svg>
  
  <span class="md-ellipsis">
    
  
    栈的应用:前缀<-中缀->后缀
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0-Gitee-Pages/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.15a.59.59 0 0 1-.592-.592v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/></svg>
  
  <span class="md-ellipsis">
    
  
    自动更新 Gitee Pages
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--deprecated"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../blog/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-braces" viewBox="0 0 24 24"><path d="M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"/></svg>
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Posts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Posts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/Grasshopper%E4%BB%8E0%E5%BC%80%E5%A7%8B/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-rocket" viewBox="0 0 24 24"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.4 22.4 0 0 1-4 2"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
  
  <span class="md-ellipsis">
    
  
    Grasshopper从0开始
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/git%E5%88%9D%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.546 10.93 13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.85 1.85 0 0 1-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348a1.85 1.85 0 0 1 0 2.6 1.844 1.844 0 0 1-2.609 0 1.834 1.834 0 0 1 0-2.598c.182-.18.387-.316.605-.406V8.835a1.834 1.834 0 0 1-.996-2.41L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477a1.545 1.545 0 0 0 2.186 0l10.43-10.43a1.544 1.544 0 0 0 0-2.187"/></svg>
  
  <span class="md-ellipsis">
    
  
    git for Windows 初使用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/Windows-10-%E4%BD%BF%E7%94%A8VIM%E5%86%99python%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 12V6.75l6-1.32v6.48zm17-9v8.75l-10 .15V5.21zM3 13l6 .09v6.81l-6-1.15zm17 .25V22l-10-1.91V13.1z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Windows 10 使用VIM写python的基本设置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/VSCode-Rhino-%E8%81%94%E5%8A%A8%E5%86%99python%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 16.47V7.39l-6 4.54M2.22 9.19a.86.86 0 0 1-.02-1.15l1.2-1.11c.2-.18.69-.26 1.05 0l3.42 2.61 7.93-7.25c.32-.32.87-.45 1.5-.12l4 1.91c.36.21.7.54.7 1.15v13.5c0 .4-.29.83-.6 1l-4.4 2.1c-.32.13-.92.01-1.13-.2l-8.02-7.3-3.4 2.6c-.38.26-.85.19-1.05 0l-1.2-1.1c-.32-.33-.28-.87.05-1.2l3-2.7"/></svg>
  
  <span class="md-ellipsis">
    
  
    VSCode-Rhino 联动写python程序的软件配置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/math/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-sigma" viewBox="0 0 24 24"><path d="M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2"/></svg>
  
  <span class="md-ellipsis">
    
  
    Markdown 数学公式支持 in VSCode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/posts/zensical-customize/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 4V3a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6h1v4H9v11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-9h8V4z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Zensical自定义
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../About/about/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../About/mkdocs_syntax/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.138.034A12 12 0 0 0 2.35 4.873a9.35 9.35 0 0 0 1.351 7.82.014.014 0 1 1-.022.018 8.23 8.23 0 0 1-2.08-6.656c0-.015-.012-.019-.019-.007A11.9 11.9 0 0 0 .362 9.065a8.76 8.76 0 0 0 2.421 5.358.015.015 0 0 1-.018.023 7.17 7.17 0 0 1-2.64-4.044c0-.015-.02-.015-.02 0a12 12 0 0 0-.058 2.656A7.2 7.2 0 0 0 2.24 16.21c.016.015 0 .035-.016.027A6.5 6.5 0 0 1 .27 14.457c-.007-.011-.02-.007-.017.006a11.996 11.996 0 0 0 23.48 0c0-.013-.009-.017-.017-.006a6.5 6.5 0 0 1-1.955 1.78c-.018.01-.032-.011-.016-.026a7.2 7.2 0 0 0 2.196-3.153h.013a12 12 0 0 0-.06-2.656c0-.015-.017-.015-.02 0a7.17 7.17 0 0 1-2.64 4.044.015.015 0 0 1-.018-.023 8.76 8.76 0 0 0 2.42-5.358 11.9 11.9 0 0 0-1.218-3.017c-.008-.012-.022-.008-.018.007a8.23 8.23 0 0 1-2.08 6.656.015.015 0 1 1-.023-.017 9.34 9.34 0 0 0 1.353-7.821A12 12 0 0 0 11.138.034m.044.311a7.721 7.721 0 0 1 6.238 13.173l-.001.002c-2.454 2.387-6.118.862-5.745-2.07.286-2.26 3.057-4.51 5.156-5.732a.016.016 0 0 0 0-.027 18 18 0 0 1-1.214-1.296 2.413 2.413 0 0 0-3.855.067l-6.032.56a.019.019 0 0 0 0 .037l6.466.375c1.147.064 1.521 1.105.416 1.943-4.107 3.113-4.84 6.407-3.919 9.018a.017.017 0 0 1-.031.014 5.3 5.3 0 0 1-.814-1.875A7.721 7.721 0 0 1 11.182.345M9.12 17.335h1.635l-.874 2.281a2.195 2.195 0 0 1-2.339 1.262 5.3 5.3 0 0 1-1.138-.112l.28-.728c.748.087 1.39.021 1.641-.633zm3.866 0h1.463l.328 3.43H13.14l-.025-.677h-1.477l-.543.678H9.743l2.74-3.176a.7.7 0 0 1 .503-.254zm3.545 0h1.636l-1.039 2.704h2.079l-.28.727h-3.71zm-3.47.999-.88 1.096h.92z"/></svg>
  
  <span class="md-ellipsis">
    
  
    遇到百分百的女孩
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#891-nurbs" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.9.1 NURBS曲面
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#892" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.9.2 曲面的曲率
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#893" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.9.3 向量和张量空间
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        下一步
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="导航栏" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Alex The Creator
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../" class="md-path__link">
          
  <span class="md-ellipsis">
    Rhino
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A01%E8%8A%82/" class="md-path__link">
          
  <span class="md-ellipsis">
    Rhino Python Primer 101 第8章
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  
  
  


<h1 id="89">8.9 曲面</h1>
<p>此时你应该对基于网格的曲面强大和灵活性有了充分认识。所以很多工业领域把网格做为其主要曲面处理手就不足为奇了。然而，网格也有它的缺陷，这就是其他曲面技术的舞台了。</p>
<p>事实上，网格(和NURBS一样)是相当新的发现，其崛起在很大程度上取决于计算行业的需求。几个世纪以来，数学家一直在研究不同类型的曲面技术，他们已经提出了很多技术：由显式函数定义的曲面、由隐式方程定义的曲面、最小面积曲面、演进曲面、分形曲面等等。这些类型中的大多数对于日常建模工作来说都太抽象了，这就是为什么大多数CAD软件没有实现它们的原因。</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-schwarz-d-surface.jpg" width="50%"></div>

<figure>
    <figcaption width="60%">Schwarz D曲面，三重周期性的最小曲面，它将内部和外部边缘之间的所有空间划分为两个相等的块。数学上易于定义，但难以手动建模。</figcaption>
</figure>
<!--more-->
<p>除了一些原始曲面类型(如球体、圆锥体、平面和圆柱体)之外，Rhino 还支持三种自由曲面类型(Sub-D/网格/NURBS?)，其中最有用的是 Nurbs 曲面。与曲线类似，所有可能的曲面形状都可以由 Nurbs 曲面表示，这是 Rhino 中的默认曲面。它是迄今为止最有用的曲面定义，也是我们重点关注的对象。</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-primitives.svg" width="90%"></div>

<div STYLE="page-break-after: always;"></div>

<h2 id="891-nurbs">8.9.1 NURBS曲面</h2>
<div class="result">
<p><img align="right" alt="Image title" src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-normals.svg" width="250" /></p>
<p>Nurbs 曲面与 Nurbs 曲线非常相似。相同的算法用于计算形状、法线、切线、曲率和其他属性，但存在一些明显的差异。例如，曲线具有切向量和法向平面，而曲面具有法向量和切线平面。这意味着曲线缺乏朝向，而曲面缺乏方向。当然，对于所有曲线和曲面类型都是如此，你必须要学会适应这一点。通常，在编写涉及曲线或曲面的代码时，您必须对朝向和方向做出假设，这些假设有时是错误的。<BR><BR></p>
<p>对于 NURBS 曲面，几何图形实际上隐含了两个方向，因为 NURBS 曲面是 {u} 和 {v} 曲线的矩形网格。尽管这些方向通常是任意的，但我们最终还是会使用它们，因为它们让事情变得简单了一些。</p>
</div>
<p>让我们从一些简单的事情开始，实际上并不涉及NURBS曲面数学。我们即将要写的程序用到的算法称为"曲面拟合"，解决方案称为"误差扩散"。你以前肯定听到过这个术语，但可能不是在曲面几何领域。通常，"误差扩散"一词仅适用于"颜色"，"像素"和"抖动"等对象，但在图像处理中的广泛应用并不限制误差扩散算法到3D领域。</p>
<p>我们面临的问题是给定曲面与应该在曲面上的点之间的不匹配。我们不得不改变曲面，以便它和点之间的距离最小化。由于存在大量的点(并且由于表面控制点的数量是有限且固定的)，因此我们必须找出一种以非线性方式使表面变形的方法(即仅靠平移和旋转不会得到想要的结果)。请看下图，即问题的示意图：</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-pointonplane.svg" width="100%"></div>

<p>为了澄清问题，我展开了一个非常扭曲的nurbs方块，以便将其简化为控制点的矩形网格。上图是在 {uvw} 空间中绘制的，而不是世界 {xyz} 空间。实际的曲面可能会以各种方式扭曲，但我们只对简化的{uvw}空间感兴趣。</p>
<p>曲面必须经过{S}点，但目前这两个实体没有相交。{S}在曲面上的投影{S'}离{S}有一定距离，这个距离就是我们要扩散的误差。你可以看到，{S'}比其他控制点更接近一些控制点。尤其是{F}和{G}很近，但{B；C；J；K}也可以被认为是相邻的控制点。我们不是挑选固定数量的邻近控制点并移动这些控制点，以减少{S}和{S'}之间的距离，而是要移动所有的点，但不是等量移动。右边的图片显示了我们根据每个控制点与{S'}的距离分配给它的移动量。</p>
<p>你可能已经注意到算法描述中的一个问题。如果一个Nurbs曲面是平坦的，控制点就位于曲面上，但当曲面开始弯曲时，控制点就有离开曲面的趋势。这意味着控制点{uvw}坐标与{S'}之间的距离意义不大。因此，我们将使用Greville点来代替控制点。nurbs曲线和nurbs曲面都有一组Greville点(或者在Rhino中称为 "编辑点")，但在Rhino中只有曲线向用户开放了编辑点。作为程序员，我们也可以使用曲面的Greville点，这很有用，因为控制点和Greville点之间有1:1的映射，但是后者保证位于曲面上。因此，Greville点可以只用{uv}坐标来表示，这意味着我们也可以在这些确切的位置评估曲面的属性(如切线、法线和曲率)。</p>
<p>到现在为止，唯一没有决定的问题是，根据某个控制点与{S'}的距离，我们要用什么方程式来确定这个控制点的移动量。显而易见，所有 "接近 "的控制点应该比那些较远的控制点受到更大的影响。空间中两点之间的最小距离是零(负距离只在某些情况下有意义，我们很快就会提到)，最大距离是无穷大。这意味着我们需要一个在X轴上从零到无穷大的曲线，并且{x}每增加一个值，{y}的值就会减少。如果曲线低于零，就意味着我们在对曲面进行负误差变形。这本身并不是一件坏事，请让我们暂时保持现状。</p>
<p>由于这些限制，我们的选择已经相当有限，但在数学上这里仍有优化空间。如果这是一本关于数学的入门读物，我可能会选择高斯分布来消除误差，但这里将使用一个极其简单的方程式，即双曲线。如果我们把Greville点的扩散系数定义为它与{S'}的距离的倒数，我们就得到这个双曲线函数。</p>
<div class="arithmatex">\[f(y)=\frac{1}{x}\]</div>
<div align=center><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-distanceweightfactor.svg" width="70%"></div>

<p>如图所示，曲线的域从零到无穷大，对于{x}的每一个较高的值，我们得到{y}的一个较低的值，而{y}永远不会变成零。只有一个问题，这个问题在编程时就会表现出来。对于非常小的{x}值，即Greville点非常接近{S'}时，产生的{y}会非常大。当这个距离变成0时，扩散系数就会变成无限大，我们甚至永远到达不了那个程度。即使电脑的处理器在理论上能够代表大到1.8 × 10<sup>308</sup>的数字(无论如何也不可能接近无穷大)，当开始用接近极端的数字进行计算时，你有可能会越过二进制的无人区，使电脑崩溃。这还不算，在这种规模的水平上，数学的准确性也无法保证。很明显，你需要避开非常大和非常小的数字。</p>
<p>在我们的案例中，这是一个很容易解决的问题，我们可以简单地将{x}值限制在{+0.01; +∞}域内，也就是说，{y}永远不能大于100。甚至可以让这个阈值变得更小，而不会遇到问题。即使我们把{x}限制在十亿分之一的单位(0.00000001)，我们仍然可以很好的进行计算。</p>
<div class="result">
<p><img align="right" alt="Image title" src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-surface-uvw-to-xyz.svg" width="300" /></p>
<p>第一件事是写一个函数，接收一个曲面和一个{xyz}坐标的点，然后把点坐标转换到{uvw}空间。我们可以使用 <em>rs.SurfaceClosestPoint()</em> 方法来获得{u}和{v}分量，但{w}要花些心思。<BR><BR></p>
<p>首先，曲面是一个二维实体，意味着它没有厚度，因此没有"真正的"{z}或{w}分量。但曲面有指向点的法向量，可以用来模拟 "深度 "。在右图中，可以看到{uvw}坐标点，其中{w}的值是点和线的起点之间的距离。在这种情况下，负距离是有意义的，因为负距离表示{w}坐标在曲面的另一侧。</p>
</div>
<p>虽然这是一种有效的描述曲面空间坐标的方法，但你时刻不要忘记，{u}和{v}分量是用表面参数空间表示，而{w}分量则用世界空间单位表示的。我们使用的是混合坐标系，这意味着我们不能盲目地使用点与点之间的距离或角度，因为这些属性现在毫无意义。</p>
<p>为了找到点{P}在曲面{S}空间的坐标，我们需要找到{P}在{S}上的投影{P'}。然后计算出{P}和{P'}之间的距离，这样我们就知道了{w}分量的大小，接下来我们需要弄清楚{P}在曲面的哪一边，以便弄清楚{w}的符号(正或负)。既然我们的脚本能够将一个曲面拟合到多个点上，那就让函数能接收点列表：</p>
<div class="language-Python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">ConvertToUVW</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">pXYZ</span><span class="p">):</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="n">pUVW</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">pXYZ</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceClosestPoint</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="n">surface_xyz</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">EvaluateSurface</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a>        <span class="n">surface_normal</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceNormal</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a>        <span class="n">dirPos</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">PointAdd</span><span class="p">(</span><span class="n">surface_xyz</span><span class="p">,</span> <span class="n">surface_normal</span><span class="p">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a>        <span class="n">dirNeg</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">PointSubtract</span><span class="p">(</span><span class="n">surface_xyz</span><span class="p">,</span> <span class="n">surface_normal</span><span class="p">)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="n">dist</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">surface_xyz</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">dirPos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">rs</span><span class="o">.</span><span class="n">Distance</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">dirNeg</span><span class="p">)):</span> <span class="n">dist</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a>        <span class="n">pUVW</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">dist</span><span class="p">))</span>   
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="k">return</span> <span class="n">pUVW</span>
</span></code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>行</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><em>pXYZ()</em> 是一个用世界坐标表示的点列表。</td>
</tr>
<tr>
<td>4...6</td>
<td>找到{P'}的{uv}坐标，{P'}的{xyz}坐标和{P'}的曲面法向量。</td>
</tr>
<tr>
<td>8...10</td>
<td>对{P'}的{xyz}坐标与法向量进行加减法，得到{P'}两侧的两个点。</td>
</tr>
<tr>
<td>12...13</td>
<td>如果{P}离dirNeg点更近，我们知道{P}在曲面的 "下边"，我们需要让{w}变成负数。</td>
</tr>
</tbody>
</table>
<p>还需要一些其他的功能函数(这些函数在后面的大计划中会用上)，所以让我们快速地完成它：</p>
<div class="language-Python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">GrevilleNormals</span><span class="p">(</span><span class="n">idSrf</span><span class="p">):</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="n">uvGreville</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceEditPoints</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="n">srfNormals</span> <span class="o">=</span> <span class="p">[</span><span class="n">rs</span><span class="o">.</span><span class="n">SurfaceNormal</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">grev</span><span class="p">)</span> <span class="k">for</span> <span class="n">grev</span> <span class="ow">in</span> <span class="n">uvGreville</span><span class="p">]</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="k">return</span> <span class="n">srfNormals</span>
</span></code></pre></div>
<p>这个函数接收一个曲面并返回每个Greville点的法向量列表。基本操作，学习到了这个阶段，你应该不需要查阅帮助文档就能读懂这个函数。下一个函数也是一样，它接收一个向量列表和一个数字列表，并将每个向量除以匹配的数字。这个函数假定<em>Vectors</em>和<em>Factors</em>是大小相等的列表。</p>
<div class="language-Python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">DivideVectorList</span><span class="p">(</span><span class="n">Vectors</span><span class="p">,</span> <span class="n">Factors</span><span class="p">):</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">Vectors</span><span class="p">)):</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>        <span class="n">Vectors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorDivide</span><span class="p">(</span><span class="n">Vectors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Factors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        <span class="k">return</span> <span class="n">Vectors</span>
</span></code></pre></div>
<p>我们最终的算法将跟踪曲面上每个控制点的移动向量和扩散系数(原因我还没有解释)，我们需要用默认值初始化这两个列表。尽管过程很简单，但我还是决定将代码移到单独的子函数里，以保持单个程序的简练。这个函数的返回值是两个列表：Forces 和Factors</p>
<div class="language-Python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span>
<span class="normal"><a href="#__codelineno-3-8">8</a></span>
<span class="normal"><a href="#__codelineno-3-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">InstantiateForceLists</span><span class="p">(</span><span class="n">Bound</span><span class="p">):</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a>    <span class="n">Forces</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="n">Factors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Bound</span><span class="p">):</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a>        <span class="n">Forces</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a>        <span class="n">Factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="k">return</span> <span class="n">Forces</span><span class="p">,</span> <span class="n">Factors</span>
</span></code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>行</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>2...3</td>
<td>创建保存 <em>Forces</em> 和 <em>Factors</em> 的列表。</td>
</tr>
<tr>
<td>5...7</td>
<td>遍历两个列表并分配默认值( <em>Forces</em> 都为0长向量， <em>Factors</em> 都为0)</td>
</tr>
<tr>
<td>9</td>
<td>注意函数返回了两个值。调用该函数的行中的赋值将包含两个值。这种赋值方法将在后面会说。</td>
</tr>
</tbody>
</table>
<p>我们现在已经完成所有的功能子函数。我知道写还没有明显意义的代码是有点郁闷，但是冒着更坏的风险，我打算再得个寸进个尺，谈一谈这个偏差扩散算法。首先，为了让你能真正理解它背后的逻辑，还需要解决最后一个问题......</p>
<p>如果我们真的直接根据每个控制点与{P'}距离的倒数来移动，那么拟合点的双曲扩散衰减在最终的曲面上会非常明显。看一个简单的例子，一个平面{Base}，需要与四个点{A；B；C；D}进行拟合。其中3个点在曲面之上（正距离），1个在曲面之下（负距离）：</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-hyperbolas.svg" width="90%"></div>

<p>左图可以看到四个单独的双曲线（每个拟合点一个），右图可以看到拟合操作的结果，它直接使用双曲线值来决定控制点的移动量。双曲线并不是按比例绘制的，实际上它们要细得多得多，但是按比例绘制会导致几乎看不见它们，因为它们会紧紧贴着水平线和垂直线。</p>
<p>可以看到，靠近{A；B；C；D}在{Base}上投影的控制点将被大范围移动(如{S})，而在两者之间的点(如{T})几乎不会被移动。有时这是很有用的行为，特别是当我们假设原始面已经非常接近拟合点的时候。如果不是这样的话(如上图)，那么我们最终会得到一个四处伸出尖锐触角的平面。</p>
<p>假设输入曲面还没有达到最终效果。这意味着我们的算法不能依赖于曲面的初始形状，而这又意味着少量移动控制点是不可行的。我们需要将所有控制点尽可能的移动到必要的距离。这听起来很困难，但数学上的技巧很简单。我不会为你提供它为什么有效的证明，只会告诉你我们需要做什么：用移动矢量的长度除以所有双曲线之和。</p>
<p>仔细看一下上图中的控制点{S}和{T}。{S}的扩散系数很高(上面有很多黄色)，而{T}的扩散系数很低(两边都是各种颜色的薄片)。但如果想大量移动{S}和{T}，我们需要以某种方式提高{T}移动向量的长度。如果把移动向量的长度除以所有双曲线之和，你就有点类似把所有的运动向量'单位化'了，结果如下图：</p>
<div align=center><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-multisamplefitter-algorithm2.svg" width="50%"></div>

<p>这是个更平滑的拟合。在{B}和{C}之间的下陷并不是因为原始曲面的形状，而是因为在{B}和{C}之间，其他拟合点开始获得更多的相对影响，并将曲面向它们拖下去。让我们看一下代码：</p>
<div class="language-Python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">FitSurface</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">Samples</span><span class="p">,</span> <span class="n">dTranslation</span><span class="p">,</span> <span class="n">dProximity</span><span class="p">):</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a>    <span class="n">P</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfacePoints</span><span class="p">(</span><span class="n">idSrf</span><span class="p">)</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="n">G</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceEditPoints</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="n">N</span> <span class="o">=</span> <span class="n">GrevilleNormals</span><span class="p">(</span><span class="n">idSrf</span><span class="p">)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="n">S</span> <span class="o">=</span> <span class="n">ConvertToUVW</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">Samples</span><span class="p">)</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a>    <span class="p">[</span><span class="n">Forces</span><span class="p">,</span> <span class="n">Factors</span><span class="p">]</span> <span class="o">=</span> <span class="n">InstantiateForceLists</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">P</span><span class="p">))</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a>    <span class="n">dProximity</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a>    <span class="n">dTranslation</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">)):</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a>        <span class="n">dProximity</span> <span class="o">=</span> <span class="n">dProximity</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">P</span><span class="p">)):</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a>            <span class="n">LocalDist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">((</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">G</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span>  <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">((</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">G</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span><span class="mi">2</span><span class="p">))</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">LocalDist</span> <span class="o">&lt;</span> <span class="mf">0.01</span><span class="p">):</span> <span class="n">LocalDist</span> <span class="o">=</span> <span class="mf">0.01</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a>            <span class="n">LocalFactor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">LocalDist</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a>            <span class="n">LocalForce</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorScale</span><span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">LocalFactor</span> <span class="o">*</span> <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a>            <span class="n">Forces</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorAdd</span><span class="p">(</span><span class="n">Forces</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">LocalForce</span><span class="p">)</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19"></a>            <span class="n">Factors</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">Factors</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">LocalFactor</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20"></a>    <span class="n">Forces</span> <span class="o">=</span> <span class="n">DivideVectorList</span><span class="p">(</span><span class="n">Forces</span><span class="p">,</span> <span class="n">Factors</span><span class="p">)</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">P</span><span class="p">)):</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23"></a>        <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">PointAdd</span><span class="p">(</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Forces</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24"></a>        <span class="n">dTranslation</span> <span class="o">=</span> <span class="n">dTranslation</span> <span class="o">+</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorLength</span><span class="p">(</span><span class="n">Forces</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25"></a>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26"></a>    <span class="n">srf_N</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfacePointCount</span><span class="p">(</span><span class="n">idSrf</span><span class="p">)</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27"></a>    <span class="n">srf_K</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceKnots</span><span class="p">(</span><span class="n">idSrf</span><span class="p">)</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28"></a>    <span class="n">srf_W</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceWeights</span><span class="p">(</span><span class="n">idSrf</span><span class="p">)</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29"></a>    <span class="n">srf_D</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30"></a>    <span class="n">srf_D</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">SurfaceDegree</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31"></a>    <span class="n">srf_D</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">SurfaceDegree</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32"></a>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33"></a>    <span class="n">FS</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">AddNurbsSurface</span><span class="p">(</span><span class="n">srf_N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">srf_K</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">srf_K</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">srf_D</span><span class="p">,</span> <span class="n">srf_W</span><span class="p">)</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">FS</span><span class="p">,</span> <span class="n">Samples</span><span class="p">,</span> <span class="n">dTranslation</span><span class="p">,</span> <span class="n">dProximity</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>行</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>这又是一个返回多个数值的函数的例子。当这个函数完成后， <em>dTranslation</em> 将包含一个数字，代表所有控制点的总移动量， <em>dProximity</em> 将包含总误差(曲面和样本点之间的所有距离之和)。由于算法不太可能马上产生一个完美的拟合，我们需要以某种方式跟踪某个迭代的效果。如果发现函数移动控制点的和很小就可以终止程序了，因为我们知道已经达到了很高的精度。</td>
</tr>
<tr>
<td>2...5</td>
<td><em>P、G、N</em> 和 <em>S</em> 分别包含表面控制点(在{xyz}空间)、Greville点(在{uv}空间)、每个Greville点的法向量和所有拟合点坐标(在{uvw}空间)的列表。这些变量名可能很难记住，但它们短。</td>
</tr>
<tr>
<td>6</td>
<td>这个函数在第104页已经讲过了。</td>
</tr>
<tr>
<td>11</td>
<td>首先，对所有拟合点进行迭代。</td>
</tr>
<tr>
<td>13</td>
<td>然后，对所有控制点进行迭代。</td>
</tr>
<tr>
<td>14</td>
<td><em>LocalDist</em> 是当前拟合点的投影与当前Greville点之间在{uv}空间的距离。</td>
</tr>
<tr>
<td>15</td>
<td>这里限制距离为0.01，以防止一些极小的数字进入算法导致程序卡死。</td>
</tr>
<tr>
<td>16</td>
<td>代入 <em>LocalDist</em> 到双曲线方程计算当前控制点和拟合点的扩散系数。</td>
</tr>
<tr>
<td>17</td>
<td><em>LocalForce</em> 是一个向量，它暂存由当前拟合点引起的移动量。这个向量与法向量指向相同，但是向量大小(长度)=偏差大小X扩散系数(上一行计算结果)。</td>
</tr>
<tr>
<td>18</td>
<td>每个控制点都会受到所有拟合点的影响，意味着每个控制点都会在许多不同方向上受到索引。我们需要把所有的移动结合起来，得到一个最终的移动量。因为只有最终移动向量有用，所以在计算向量时就简单的把它们加在一起。</td>
</tr>
<tr>
<td>19</td>
<td>我们还需要记录下沿每个向量的扩散系数，后面需要分割它，并单位化(105页讨论过)。</td>
</tr>
<tr>
<td>20</td>
<td>向量除以系数(104页有函数解释)。</td>
</tr>
<tr>
<td>22...24</td>
<td>将计算出的移动量应用于曲面控制点{xyx}坐标。</td>
</tr>
<tr>
<td>26...33</td>
<td>我们不在原地改变原曲面，而是新建一个曲面。为了做到这一点，需要收集原来所有的NURBS数据，比如节点向量、阶数、权重等等。</td>
</tr>
</tbody>
</table>
<p>上面的程序没有接口代码，因此它交不是顶层程序。我们需要用户选择一个曲面，一些点，然后多次运行FitSurface()函数，直到拟合效果让人满意：</p>
<div class="language-Python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">DistributedSurfaceFitter</span><span class="p">():</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a>    <span class="n">idSrf</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">&quot;Surface to fit&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a>    <span class="k">if</span> <span class="n">idSrf</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a>    <span class="n">pts</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetPointCoordinates</span><span class="p">(</span><span class="s2">&quot;Points to fit to&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a>    <span class="k">if</span> <span class="n">pts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a>    <span class="n">dTrans</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a>    <span class="n">dProx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a>    <span class="k">for</span> <span class="n">N</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a>        <span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a>        <span class="n">nSrf</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">dTrans</span><span class="p">,</span> <span class="n">dProx</span> <span class="o">=</span> <span class="n">FitSurface</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">dTrans</span><span class="p">,</span> <span class="n">dProx</span><span class="p">)</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a>        <span class="n">rs</span><span class="o">.</span><span class="n">DeleteObject</span><span class="p">(</span><span class="n">idSrf</span><span class="p">)</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a>        <span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a>        <span class="n">rs</span><span class="o">.</span><span class="n">Prompt</span><span class="p">(</span><span class="s2">&quot;Translation =&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">dTrans</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;Deviation =&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">dProx</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17"></a>        <span class="k">if</span> <span class="n">dTrans</span> <span class="o">&lt;</span> <span class="mf">0.1</span> <span class="ow">or</span> <span class="n">dProx</span> <span class="o">&lt;</span> <span class="mf">0.01</span><span class="p">:</span> <span class="k">break</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18"></a>        <span class="n">idSrf</span> <span class="o">=</span> <span class="n">nSrf</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19"></a>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Final deviation = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">dProx</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
</span></code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>行</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>11</td>
<td>这里没有使用无限循环( <em>while</em> )，而是将拟合迭代次数限制在1000次。这应该是绰绰有余了，如果到那时还没有找到一个好的解决方案，那么也就不太可能找到。变量N在编程俚语中被称为 "Chicken int"。"Int "是 "Integer "的缩写，"Chicken "是因为你害怕循环会一直持续下去。</td>
</tr>
<tr>
<td>12...15</td>
<td>禁用视窗绘制，创建新曲面，删除旧曲面，并重新开启视窗绘制。</td>
</tr>
<tr>
<td>16</td>
<td>告知用户当前迭代的效率。</td>
</tr>
<tr>
<td>17</td>
<td>如果总的转换量可以忽略不计，我们不妨放弃，因为继续运行程序不会使它更好。如果总偏差小于0.01，拟合效果就很好了，我们应该退出程序。</td>
</tr>
</tbody>
</table>
<p>到目前为止，所有用来说明这个算法的图和曲线都是2维的，而且只显示了简化的情况。本页用3维空间图显示一个程序运行的进展情况。从一个包含30 × 30个控制点的矩形、平面开始，在它上方和下方总共有36个拟合点。算法持续运行，直到总偏差小于0.01单位。</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-iterations.svg" width="100%"></div>

<div STYLE="page-break-after: always;"></div>

<!-- !!!BOOKMARK!!! -->

<h2 id="892">8.9.2 曲面的曲率</h2>
<div class="result">
<p><img align="right" alt="Image title" src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-curvecurvaturelogic2.svg" width="255" /></p>
<p>我们很容易感受到曲线的曲率。只需将一个圆尽可能地套在一条短的曲线上(这叫作密切圆)，这个圆的半径和圆心就是你需要的局部曲率。前面已经讨论过这个问题。<BR><BR></p>
<p>点{A; B; C; D; E}都存在特定的曲率。各个圆的半径是曲率的度量标准(事实上，曲率是半径的倒数)，而向量的方向是曲线平面的指示。</p>
</div>
<p>如果把曲线缩放到原来的50%，曲率圆也会变成一半大，曲率值增加一倍。点{C}的特殊之处在于它的曲率为零(即密切圆的半径为无穷大)。曲率值由负变正的点被称为拐点。如果我们有多个相邻的拐点，我们遇到了曲线中的一个线性段。</p>
<p>曲面曲率不是那么简单的。首先，在曲面和实体的情况下，有多种曲率的定义，哪一种最适合我们，取决于特定算法。在许多制造和设计项目中，曲率是一个相当重要的概念，这就是为什么我们要深入的了解它的原因。在下一节之前，我不会涉及任何编程代码，所以如果你已经熟悉了曲率理论，可以跳到第111页。</p>
<p>评估曲面曲率最明显的方法是用直线切开，穿过我们感兴趣的{P}点，然后简单地继续使用曲线曲率的算法。但是，如前所述，曲面缺乏方向性，因此我们根本不清楚应该从哪个角度来切开曲面(我们可以使用{u}和{v}方向，但这些不一定会给你有意义的答案)。不过，这种方法还是时常有用，它的名字叫法线曲率。正如你在下面的插图中所看到的，通过{P}点的截面有无数个，因此"{P}点的法线曲率是多少？"这个问题的答案也有无数个。</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-curvatures.svg" width="90%"></div>

<p>但是在特定情况下，这个问题只有一个答案。"{P}处最高的法线曲率是多少？"。当观察所有可能的法线曲率的完整集合时，你会发现曲面在一个方向上大部分是平的，在另一个方向上大部分是弯曲的。因此这两个方向是特殊的，它们构成了曲面的主曲率。这两个主曲率方向总是互相垂直的，因此它们完全与{u}和{v}方向无关，即便({u}和{v}也不需要总是垂直)。</p>
<p>事实上情况更复杂，因为可能有多个方向产生最低或最高的法线曲率，所以在某些情况下需要一些额外的魔法才能得到结果。例如，球体在所有方向上都有相同的曲率，所以我们根本无法定义主曲率方向。</p>
<p>事情并没有结束。从所有法线曲率的集合开始，我们提取了主曲率的定义。主曲率总是成对出现(最小和最大)，它们既是数值也是方向。我们往往只对一个曲面的弯曲程度感兴趣，而不是特别关注哪个方向。其中一个原因是，主曲率方向在整个曲面上的演进并不是平滑的：</p>
<div align=center><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-surfacek-tensor-field.svg" width="80%"></div>

<p>左图显示了最大主曲率的方向。可以看到的，表面上有一些阈值线，在这些阈值线上，主方向突然发生了90º的转折。整个画面是混乱的，过于复杂。可以使用标准的<strong>张量平滑算法</strong>来平均每个方向和它相邻的方向，从而得到右图，它提供的分布信息更加有用(例如用于纹理或图案的目的)，但在图中矢量已经失去了意义。这就是为什么主曲率方向在日常使用中并不是一个非常有用的曲面属性的原因。</p>
<p>前面提到的其他曲面曲率定义不涉及方向，只涉及曲率的标量值：密切圆半径。在曲面曲率的定义中，最有名的是高斯曲率和平均曲率。这两种定义在_CurvatureAnalysis指令和RhinoScriptSyntax模块中都可以找到。</p>
<p>伟大的德国数学家卡尔-弗里德里希-高斯(Carl Friedrich Gauss)发现，将主曲率半径相乘，可以得到另一个对某些目的来说更有用的曲率指标：</p>
<div class="arithmatex">\[K_{Gauss}=K_{min} \cdot K_{max}\]</div>
<p>其中K<sub>Gauss</sub>是高斯曲率，K<sub>min</sub>和K<sub>max</sub>是主曲率。假设你完全理解乘法的行为，我们来确定一些具体的情况</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-curvature-directions.svg" width="90%"></div>

<p>由此我们可以得出结论，高斯曲率处处为0的曲面可以展开成一个平面，高斯曲率处处为负的表面都可以通过拉伸弹性布而制成。</p>
<p>另一个重要的曲率定义是平均曲率，本质上是主曲率之和的平均值：</p>
<div class="arithmatex">\[K_{Mean}=\frac{K_{min} + K_{max}}{2}\]</div>
<p>如你所知，求和的结果与乘法截然不同，平均曲率可以用来分析曲面的不同性质，因为它有不同的特殊情况。如果最小主曲率和最大主曲率的幅值相等，但符号相反，则两者的平均值为0。一个平均曲率为零的曲面不仅仅是一面凹一面凸，它是一种非常特殊的曲面，被称为 <em>最小</em> 或 <em>零能量</em> 曲面。它是两边大气压力相等的肥皂膜的自然形状。这种曲面在拉伸结构领域非常重要，因为它们在整个曲面上平均分散应力，是有坚固结构的几何体。</p>
<h2 id="893">8.9.3 向量和张量空间</h2>
<p>在上一页，我一口气提到了 "张量"、"平滑 "和 "算法 "这3个词。尽管你很可能知道后两个词的意思，但它们3组合起来就不太能理解了。张量平滑是一个有用的工具，所以我将详细讨论这个具体的案例。请记住，接下来的大部分脚本是通用的，可以很容易地针对不同类别的张量进行调整。首先讲一些背景信息...</p>
<p>想象一个没有奇点的曲面，比如一个环形或一个平面，没有堆积的控制点。这个曲面上的每个点都有一个与之相关的法向量。所有这些法向量的集合就是一个向量空间的例子。向量空间是某个区间上的连续的向量集合。所有表面法向量的集合是一个二维向量空间(有时被称为向量场)，就像所有曲线切线的集合是一个一维向量空间，湍流体积中所有空气压力成分随时间变化的集合是一个四维向量空间，等等。</p>
<p>当说到"向量"时，我们通常是指小箭头：在某种空间背景下表示方向和大小的数字列表。当情况更复杂时，我们开始使用 "张量 "来代替向量。张量是一个更通用的术语，它的隐含意义更少，因此在许多科学文章表述中更受欢迎。</p>
<div class="result">
<p><img align="right" alt="Image title" src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-tensorspace2.svg" width="375" /></p>
<p>例如，你身体表面是一个二维张量空间(嵌入四维时空)，它有许多从一处到另一处平衡变化的属性，比如:毛发、肤色、湿润度、敏感度、雀斑度和气味等等。如果在一组采样点测量所有这些属性，我们就可以使用内推和外推算法根据结果数据，对你身体上的所有其他点进行有根据的猜测。我们甚至可以通过使用一些专用的符号集对这样的张量空间进行图形化表示。 <BR><BR></p>
<p>我们可以通过将皮肤的湿润度与盒子颜色中的蓝色量联系起来，将雀斑度与绿色联系起来，或与盒子的宽度联系起来，或与旋转角度联系起来，从而实现可视化。</p>
</div>
<p>所有这些属性共同构成了张量类。由于我们可以选择包含和不包含的属性，所以张量本质上是你想要的任何东西。让我们更详细地分析一下上一页提到的张量类，它是一个相当简单的张量类...</p>
<p>我创建了一个表面上最大主曲率方向的向量场(以一定的自定义分辨率采样)，然后我把它们平滑化，以摆脱方向上的突然跳跃。对两个向量进行平均化很容易，但在保持结果与曲面相切的情况下对它们进行平均化就有点难了。</p>
<p>在这种特殊情况下，我们最终得到一个二维张量空间，其中张量类T由一个向量和一个切面组成：</p>
<div align=center><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-tensormatrixes.svg" width="75%"></div>

<p>由于在{u}和{v}方向上以规则的参数间隔对曲面进行采样，我们最终得到了一个张量矩阵(一个行和列的表格)。可以用一个二维列表来表示它。程序中需要两个这样的列表，因为我们需要存储两个独立的数据实体：向量和平面。</p>
<div align=center ><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-smoothing.png" width="90%"></div>

<p>平滑迭代程序的逐步演算，清楚地表明了张量平滑算法的有用性：它可以消除任何连续张量空间中的奇点和折痕。</p>
<p>这里我不打算写出完整的程序，只突出了关键的功能。可以在程序文件夹中找到完整的程序(包括注释)。</p>
<div class="language-Python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">SurfaceTensorField</span><span class="p">(</span><span class="n">Nu</span><span class="p">,</span> <span class="n">Nv</span><span class="p">):</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="n">idSrf</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetSurfaceObject</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">uDomain</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceDomain</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="n">vDomain</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceDomain</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a>    <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a>    <span class="n">K</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Nu</span><span class="p">):</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a>        <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a>        <span class="n">K</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a>        <span class="n">u</span> <span class="o">=</span> <span class="n">uDomain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">Nu</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">uDomain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">uDomain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12"></a>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="n">Nv</span><span class="p">):</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13"></a>            <span class="n">v</span> <span class="o">=</span> <span class="n">vDomain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span><span class="o">/</span><span class="n">Nv</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">vDomain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vDomain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14"></a>            <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">SurfaceFrame</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">)))</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15"></a>            <span class="n">localCurvature</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">SurfaceCurvature</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16"></a>            <span class="k">if</span> <span class="n">localCurvature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17"></a>                <span class="n">K</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19"></a>                <span class="n">K</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">SurfaceCurvature</span><span class="p">(</span><span class="n">idSrf</span><span class="p">,(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">))[</span><span class="mi">3</span><span class="p">])</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20"></a>    <span class="k">return</span> <span class="n">SmoothTensorField</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">K</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>行</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>这个子函数需要创建定义张量类的2个列表。一个向量列表，一个平面列表。</td>
</tr>
<tr>
<td>9...10</td>
<td>在进行每一次<span class="arithmatex">\(N_u\)</span>迭代的开始，给T和K分别嵌套一个子列表，用于保存<span class="arithmatex">\(N_v\)</span>范围内所有的迭代值。</td>
</tr>
<tr>
<td>11</td>
<td>这条等式看起来很吓人，但这是一个非常标准的逻辑片段。这是一个常见的问题：如何将一个数字从一个尺度映射到另一个。我们知道用户想要多少个样本(某个整数)，我们知道曲面域的极限(两个双精度实数)。我们需要弄清楚曲面域的哪个参数与第N个样本数相匹配。观察下图以了解问题的示意图：<br><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-remapnumberscales.svg" width="80%" float="right"><br>我们的样本数(最上面的一条)从{A}到{B}，而面的参数域值包括{C}和{D}之间的所有数值。我们需要弄清楚如何将{A~B}范围内的数字映射到{C~D}范围。在我们的例子中，需要一个线性映射函数，意味着{A}和{B}之间的数值会被重新映射到{C}和{D}之间的另一个数值。<br>第11行(和第13行)包含了这样一个映射算法的实现。我不打算详细说明它是如何工作的，如果想完全理解这个程序，你就必须自己去研究。</td>
</tr>
<tr>
<td>14</td>
<td>获取{u,v}处的曲面框架。这是我们张量类的一部分。</td>
</tr>
<tr>
<td>15</td>
<td>获取{u,v}处的所有曲面曲率信息。这包括主曲率、平均曲率和高斯曲率的值和向量。</td>
</tr>
<tr>
<td>17</td>
<td>如果曲面在{u,v}处没有曲率，则使用框架的X轴向量代替。</td>
</tr>
<tr>
<td>19</td>
<td>如果曲面在{u,v}处有一个有效的曲率，我们可以使用主曲率方向，该曲率方向存储在曲率数据阵列的第4个元素中。</td>
</tr>
</tbody>
</table>
<p>下面的函数接收两个列表，原地修改原始列表。返回值(两个列表)只是表面上的装饰性的。这个函数是一个典型的均值滤波算法。它使用一个3×3的模糊矩阵将每个张量的值与所有相邻的张量进行平均。</p>
<div class="language-Python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">SmoothTensorField</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a>    <span class="n">SmoothTensorField</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a>    <span class="n">Ub1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="n">Ub2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Ub1</span><span class="p">):</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Ub2</span><span class="p">):</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a>            <span class="n">k_tot</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8"></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9"></a>                <span class="n">xm</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">Ub1</span><span class="p">)</span> <span class="o">%</span> <span class="n">Ub1</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10"></a>                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11"></a>                    <span class="n">ym</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="n">Ub2</span><span class="p">)</span> <span class="o">%</span> <span class="n">Ub2</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12"></a>                    <span class="n">k_tot</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorAdd</span><span class="p">(</span><span class="n">k_tot</span><span class="p">,</span> <span class="n">K</span><span class="p">[</span><span class="n">xm</span><span class="p">][</span><span class="n">ym</span><span class="p">])</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13"></a>            <span class="n">k_dir</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">PlaneClosestPoint</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorAdd</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">k_tot</span><span class="p">))</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14"></a>            <span class="n">k_tot</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorSubtract</span><span class="p">(</span><span class="n">k_dir</span><span class="p">,</span> <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15"></a>            <span class="n">k_tot</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">VectorUnitize</span><span class="p">(</span><span class="n">k_tot</span><span class="p">)</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16"></a>            <span class="n">K</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k_tot</span><span class="p">)</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17"></a>            <span class="n">line</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">AddLine</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">K</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18"></a>    <span class="k">return</span> <span class="n">T</span><span class="p">,</span> <span class="n">K</span>
</span></code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th>行</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>5...6</td>
<td>由于我们的张量空间是二维的，我们需要两个嵌套循环来迭代整个集合。</td>
</tr>
<tr>
<td>8...11</td>
<td>现在我们正在单独处理每个张量(前两个循环)，我们也需要处理每个张量的邻居(第二组嵌套循环)。我们可以用一个简单的表格来形象地说明手头的问题。<br>绿色区域是整个二维张量空间的一角，深绿色的线划定了每个单独的张量。深灰色的正方形是我们目前正在处理的张量。它位于{u,v}。它周围的八个白色方块是相邻的张量，它们将被用来模糊{u,v}处的张量。<br>我们需要再做两个嵌套循环，在这个3×3矩阵的9个坐标上进行迭代。我们还需要确保这9个坐标实际上都在二维张量空间上，而不是在边缘上摇摆不定。我们可以使用Mod运算符来确保一个数字被 "重新映射 "为属于某个数字域。<br><DIV><img src="https://cdn.jsdelivr.net/gh/chinabiue/img@latest/rhino101/primer-boxblurmatrix3x3.svg" width="30%" align=center></DIV></td>
</tr>
<tr>
<td>12</td>
<td>一旦我们有了张量的 <em>mx</em> 和 <em>my</em> 坐标，我们就可以把它加到 <em>k_tot</em> 的求和向量中。</td>
</tr>
<tr>
<td>13...16</td>
<td>确保向量被投射回切平面并被单位化。</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_1">下一步</h2>
<p>恭喜，你完成了Python 101入门.</p>


  <nav class="md-tags" >
    
      
      
      
        
        
          
        
      
      
        <span class="md-tag md-tag-icon md-tag--rhino">Rhino</span>
      
    
      
      
      
        
        
      
      
        <span class="md-tag md-tag-icon">Rhino-Python-Primer-101</span>
      
    
  </nav>








  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-circle-arrow-up" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="m16 12-4-4-4 4M12 16V8"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <!-- Footer -->
<footer class="md-footer">

    <!-- Link to previous and/or next page -->
    
    
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >

        <!-- Link to previous page -->
        
        
        <a href="../Rhino-Python-Primer-101-%E7%AC%AC8%E7%AB%A08%E8%8A%82/" aria-label="上一页: 8.8 网格">
            <div class="md-footer__direction">
                ◀ 8.8 网格
            </div>
        </a>
        

        <!-- Link to next page -->
        
        
        <a href="../Rhino-Python-Primer-101-%E7%AC%AC9%E7%AB%A09%E8%8A%82/" aria-label="下一页: Rev3程序勘误">
            <div class="md-footer__direction">
                Rev3程序勘误 ▶
            </div>
        </a>
        
    </nav>
    
    
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      
      <script id="__config" type="application/json">{"annotate":null,"base":"../../..","features":["announce.dismiss","content.code.annotate","content.code.copy","content.code.select","content.footnote.tooltips","content.tabs.link","content.tooltips","navigation.footer","navigation.indexes","navigation.instant","navigation.instant.prefetch","navigation.path","navigation.sections","navigation.tabs","navigation.tabs.sticky","navigation.top","navigation.tracking","search.highlight","toc.follow"],"search":"../../../assets/javascripts/workers/search.e2d2d235.min.js","tags":{"Life":"life","Python":"py","Rhino":"rhino"},"translations":{"clipboard.copied":"已复制","clipboard.copy":"复制","search.result.more.one":"在该页上还有 1 个符合条件的结果","search.result.more.other":"在该页上还有 # 个符合条件的结果","search.result.none":"没有找到符合条件的结果","search.result.one":"找到 1 个符合条件的结果","search.result.other":"# 个符合条件的结果","search.result.placeholder":"键入以开始搜索","search.result.term.missing":"缺少","select.version":"选择当前版本"},"version":null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.00c35305.min.js"></script>
      
        <script src="../../../assets/js/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>